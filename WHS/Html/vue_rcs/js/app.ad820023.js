(function(t){function e(e){for(var s,l,i=e[0],n=e[1],c=e[2],u=0,p=[];u<i.length;u++)l=i[u],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);m&&m(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,i=1;i<a.length;i++){var n=a[i];0!==r[n]&&(s=!1)}s&&(o.splice(e--,1),t=l(l.s=a[0]))}return t}var s={},r={app:0},o=[];function l(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=s,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(a,s,function(e){return t[e]}.bind(null,s));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],n=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var m=n;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0417":function(t,e,a){t.exports=a.p+"img/AGV4.18bac90f.png"},"3a5c":function(t,e,a){},"41b8":function(t,e,a){"use strict";a("3a5c")},"478b":function(t,e){function a(t,e,a,s){this.flag="step",this.h=16,this.w=16,this.x=e,this.y=a,void 0==s.show||s.show?t.globalAlpha=1:t.globalAlpha=0,void 0!=s.color&&""!=s.color?t.fillStyle=s.color:t.fillStyle="#f1bbc4",t.lineWidth="1",t.fillRect(e,a,this.w,this.h)}function s(t,e,a,s){this.x1=t,this.y1=e,this.x2=a,this.y2=s,this.tmpX1=null,this.tmpY1=null,this.tmpX2=null,this.tmpY2=null,this.color="#ffffff"}t.exports={get(t,e,a){console.log(t,e,a)},drawAgvMap1(t,e,a){console.log("drawAgvMap1..."),e.width=a.canvasWidth,e.height=a.canvasHeight,a.mapinfo.forEach((function(e){if("CustomEllipse"===e.dtype){t.globalAlpha=1;var a=e.fill.substring(1,e.fill.length-6);t.fillStyle=e.fill.replace(a,""),t.lineWidth=e.thickness,t.fillRect(e.l,e.t,e.w,e.h)}else if("CustomLine"===e.dtype)try{t.globalAlpha=1;var s=e.sp.split(","),r=e.ep.split(","),o=e.l+parseFloat(s[0]),l=e.t+parseFloat(s[1]),i=e.l+parseFloat(r[0]),n=e.t+parseFloat(r[1]);t.beginPath(),a=e.stroke.substring(1,e.stroke.length-6),t.strokeStyle="white",t.lineWidth=e.thickness+3,t.moveTo(o,l),t.lineTo(i,n),t.stroke()}catch{console.log("huaxian fail")}}))},arcImg(t,e,a){t.beginPath(),t.arc(e+8,a+8,10,0,2*Math.PI),t.fill(),t.stroke()},watermark(t,e){var a={watermark_txt:t,watermark_x:e.clientWidth/2-350,watermark_y:e.clientHeight/2-150,watermark_rows:1,watermark_cols:1,watermark_x_space:100,watermark_y_space:50,watermark_color:"#aaa",watermark_alpha:.15,watermark_fontsize:"200px",watermark_font:"微软雅黑",watermark_width:700,watermark_height:300,watermark_angle:0};if(1===arguments.length&&"object"===typeof arguments[0]){var s=arguments[0]||{};for(var r in s)s[r]&&a[r]&&s[r]===a[r]||s[r]&&(a[r]=s[r])}var o=document.createDocumentFragment(),l=Math.max(e.scrollWidth,e.clientWidth),i=.015*l;l-=i;var n,c,m=Math.max(e.scrollHeight,e.clientHeight)+450;m=Math.max(m,window.innerHeight-30),(0==a.watermark_cols||parseInt(a.watermark_x+a.watermark_width*a.watermark_cols+a.watermark_x_space*(a.watermark_cols-1))>l)&&(a.watermark_cols=parseInt((l-a.watermark_x+a.watermark_x_space)/(a.watermark_width+a.watermark_x_space)),a.watermark_x_space=parseInt((l-a.watermark_x-a.watermark_width*a.watermark_cols)/(a.watermark_cols-1))),(0==a.watermark_rows||parseInt(a.watermark_y+a.watermark_height*a.watermark_rows+a.watermark_y_space*(a.watermark_rows-1))>m)&&(a.watermark_rows=parseInt((a.watermark_y_space+m-a.watermark_y)/(a.watermark_height+a.watermark_y_space)),a.watermark_y_space=parseInt((m-a.watermark_y-a.watermark_height*a.watermark_rows)/(a.watermark_rows-1)));for(var u=0;u<a.watermark_rows;u++){c=a.watermark_y+(a.watermark_y_space+a.watermark_height)*u;for(var p=0;p<a.watermark_cols;p++){n=a.watermark_x+(a.watermark_width+a.watermark_x_space)*p;var d=document.createElement("div");d.id="mask_div"+u+p,d.className="mask_div",d.appendChild(document.createTextNode(a.watermark_txt)),d.style.webkitTransform="rotate(-"+a.watermark_angle+"deg)",d.style.MozTransform="rotate(-"+a.watermark_angle+"deg)",d.style.msTransform="rotate(-"+a.watermark_angle+"deg)",d.style.OTransform="rotate(-"+a.watermark_angle+"deg)",d.style.transform="rotate(-"+a.watermark_angle+"deg)",d.style.visibility="",d.style.position="absolute",d.style.left=n+"px",d.style.top=c+"px",d.style.overflow="hidden",d.style.zIndex="9999",d.style.pointerEvents="none",d.style.opacity=a.watermark_alpha,d.style.fontSize=a.watermark_fontsize,d.style.fontFamily=a.watermark_font,d.style.color=a.watermark_color,d.style.textAlign="center",d.style.width=a.watermark_width+"px",d.style.height=a.watermark_height+"px",d.style.display="block",o.appendChild(d)}}e.appendChild(o)},removeWatermark(){void 0!=document.getElementById("mask_div00")&&document.getElementById("mask_div00").remove()}},a.prototype.drawBottomToTop=function(t,e){if("step"==t.flag){var a=new s(this.x+t.w/2,this.y+t.h,this.x+t.w/2,t.y);a.drawBottomToTop(e)}},a.prototype.drawRightToLeft=function(t,e){var a=null;"step"==t.flag&&(a=new s(this.x+t.w,this.y+t.h/2,t.x,t.y+t.h/2)),a.drawLeftToRightOrRightToLeft(e)},s.prototype.setColor=function(t){this.color=t},s.prototype.drawBottomToTop=function(t){this.x1!=this.x2||this.draw(t)},s.prototype.drawLeftToRightOrRightToLeft=function(t){this.y1!=this.y2||this.draw(t)},s.prototype.draw=function(t){t.strokeStyle=this.color,t.lineWidth=6,t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.closePath(),t.stroke()}},"4ecc":function(t,e){t.exports="data:image/png;base64,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"},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),r=a("5c96"),o=a.n(r),l=(a("0fae"),function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)}),i=[],n={name:"App",components:{}},c=n,m=(a("41b8"),a("2877")),u=Object(m["a"])(c,l,i,!1,null,null,null),p=u.exports,d=a("8c4f"),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"rcsmap-container"},[e("div",{staticClass:"rcsmap-header"},t._l(t.TotalFloor,(function(a){return e("div",{key:a,staticClass:"tab",class:a==t.selectTabIndex?"tabSelect":"tabUnselect",on:{click:function(e){return t.tabChange(a)}}},[t._m(0,!0),e("p",{staticClass:"font"},[t._v(t._s(a)+" 层")])])})),0),e("div",{staticClass:"rcsmap-main"},[e("div",{staticClass:"warning mapInfo"},[t._v(t._s(t.mapInfo))]),e("div",{staticClass:"box",attrs:{id:"div1"},on:{mousewheel:t.scaleDom,mousedown:t.handleDragDown}},[e("canvas",{attrs:{id:"scaleDragCanvas",width:"1920",height:"1080"}}),e("canvas",{attrs:{id:"carCanvas",width:"1920",height:"1080"}}),t._l(t.imgList,(function(s){return e("img",{key:s.key,staticClass:"icon",style:"margin-left:"+s.l+"px;margin-top:"+s.t+"px;width:"+s.w+"px;height:"+s.h+"px;",attrs:{src:a("4ecc"),alt:""},on:{mouseover:function(e){return t.IconOver(s)},mouseout:function(e){return t.IconOut()}}})})),t._l(t.carList,(function(s){return e("div",{directives:[{name:"show",rawName:"v-show",value:s.floor==t.selectTabIndex,expression:"item.floor == selectTabIndex"}],key:s.code,style:"margin-left:"+s.left+"px;margin-top:"+s.top+"px;position:absolute;"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:s.code+" 电量:"+s.power+"%",placement:"top"}},[e("img",{staticClass:"carIcon",style:"width:"+s.width+"px;height:"+s.height+"px;",attrs:{src:a("0417"),id:s.code,alt:""},on:{mouseenter:function(e){return t.transform(s.code)},mouseout:t.transformOut}})]),e("span",{staticClass:"pulse delay-01"}),e("span",{staticClass:"pulse delay-02"})],1)}))],2)]),e("div",{staticClass:"rcsmap-right"},t._l(t.menuList,(function(a){return e("div",{key:a.index,staticClass:"menutab",class:a.index==t.selectMenuIndex?"tabSelect":"tabUnselect",on:{click:function(e){return t.menuChange(a)}}},[e("div",{staticClass:"icon-item"},[e("i",{class:a.content})]),e("p",{staticClass:"font"},[t._v(t._s(a.name))])])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.menu0,expression:"menu0"}],staticClass:"right-menu",attrs:{id:"menu0"}},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{staticClass:"tabcolor",attrs:{label:"设备信息",name:"first"}},[e("el-row",[e("el-select",{attrs:{clearable:"",placeholder:"请选择设备编号",size:"small"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.carList,(function(t){return e("el-option",{key:t.code,attrs:{label:t.code,value:t.code}})})),1),e("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:"",size:"small"},on:{click:function(e){return t.carSearch()}}},[t._v("查询")])],1),t._l(t.carShow,(function(a){return e("el-row",{key:a.code},[e("el-row",{staticClass:"car-header"},[e("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[e("el-checkbox",{attrs:{label:"追踪"}}),e("el-checkbox",{attrs:{label:"隐匿"}})],1)],1),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"grid-content bg-purple textCenter"},[e("img",{attrs:{src:t.carPng,alt:"",srcset:""}}),e("p",{staticClass:"textCenter"},[t._v("电量")]),e("p",{staticClass:"textColor"},[t._v(t._s(a.power)+"%")])])]),e("el-col",{attrs:{span:18}},[e("div",{staticClass:"grid-content bg-purple-light"},[e("el-row",{staticClass:"row-bg",attrs:{gutter:10}},[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple"},[e("label",{staticClass:"labelText",attrs:{for:""}},[t._v("设备编号 "+t._s(a.code))])])]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple"},[e("label",{staticClass:"labelText",attrs:{for:""}},[t._v("IP 192.168.0.1")])])]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple"},[e("label",{staticClass:"labelText",attrs:{for:""}},[t._v("设备类型 潜伏")])])])],1),e("el-row",{staticClass:"row-bg",attrs:{gutter:10}},[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple"},[e("label",{staticClass:"labelText",attrs:{for:""}},[t._v("所在地图 1")])])]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple"},[e("label",{staticClass:"labelText",attrs:{for:""}},[t._v("所在楼层 "+t._s(a.floor))])])]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple"},[e("label",{staticClass:"labelText",attrs:{for:""}},[t._v("是否在线 "),e("span",{staticClass:"normal"},[t._v("在线")])])])])],1),e("el-row",{staticClass:"row-bg",attrs:{gutter:10}},[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple"},[e("label",{staticClass:"labelText",attrs:{for:""}},[t._v("任务状态 "),e("span",{staticClass:"warning"},[t._v("运行中")])])])]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple"},[e("label",{staticClass:"labelText",attrs:{for:""}},[t._v("设备状态 "),e("span",{staticClass:"warning"},[t._v("运行中")])])])]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"grid-content bg-purple"},[e("label",{staticClass:"labelText",attrs:{for:""}},[t._v("负载情况 "),e("span",{staticClass:"normal"},[t._v("空载")])])])])],1),e("el-row",{staticClass:"row-bg"},[e("label",{staticClass:"labelText",attrs:{for:""}},[t._v("当前坐标角度 ["+t._s(a.left)+","+t._s(a.top)+"]")])]),e("el-row",{staticClass:"row-bg"},[e("label",{staticClass:"labelText",attrs:{for:""}},[t._v("目的坐标角度 ["+t._s(a.endleft)+","+t._s(a.endtop)+"]")])])],1)])],1)}))],2),e("el-tab-pane",{staticClass:"tabcolor",attrs:{label:"货架信息",name:"second"}},[t._v("配置管理")])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.menu1,expression:"menu1"}],staticClass:"right-menu",attrs:{id:"menu1"}},[t._v("控制调度")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.menu2,expression:"menu2"}],staticClass:"right-menu",attrs:{id:"menu2"}},[t._v("屏幕录制")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.menu3,expression:"menu3"}],staticClass:"right-menu",attrs:{id:"menu3"}},[t._v("辅助工具")])])},w=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon-item"},[e("i",{staticClass:"el-icon-map-location"})])}],_=a("66c0"),v=_["a"],f=(a("9911"),Object(m["a"])(v,h,w,!1,null,"043b5f48",null)),g=f.exports;s["default"].use(d["a"]);const b=[{path:"/",name:"RcsNew",component:g}],k=new d["a"]({routes:b});var C=k;s["default"].use(o.a),s["default"].config.productionTip=!1,new s["default"]({router:C,render:t=>t(p)}).$mount("#app")},"66c0":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("14d9"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),_views_RCSNew_rcs_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("478b"),_views_RCSNew_rcs_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_views_RCSNew_rcs_js__WEBPACK_IMPORTED_MODULE_1__);__webpack_exports__["a"]={name:"RCSMapNew",data(){return{canvas:null,context:null,canvas1:null,ctx:null,oDiv:null,icon:null,speed:0,space:0,step:0,i:0,finish:!0,ws:null,Position:{X:0,Y:0},imgHtml:"",imgList:[],scale:1,flowData:null,AGVCarList:[{}],editableTabsValue:"2",selectTabIndex:1,menuList:[{title:"Tab 1",name:"信息监视",content:"el-icon-view",index:0},{title:"Tab 1",name:"控制调度",content:"el-icon-set-up",index:1},{title:"Tab 1",name:"屏幕录制",content:"el-icon-video-camera-solid",index:2},{title:"Tab 1",name:"辅助工具",content:"el-icon-setting",index:3}],selectMenuIndex:0,activeName:"first",options:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"}],value:"",carPng:__webpack_require__("c013"),carList:null,carShow:null,checkList:[],menu0:!0,menu1:!1,menu2:!1,menu3:!1,mapInfo:"",mousex:0,mousey:0,transformId:null,rotateVal:0,TotalFloor:0,halfWidth:0,halfHeight:0,agv_register:{Params:{UserName:"admin",Password:"123456"},ID:"1",Action:"agv_register"},agv_map:{Params:{Floor:1},ID:"1",Action:"agv_map"},agv_allcars:{Params:{},ID:"1",Action:"agv_allcars"}}},created(){},mounted(){this.webSocket(),window.onbeforeunload=function(){try{this.ws.send("quit"),this.ws.close(),this.ws=null}catch(t){console.log(t)}}},watch:{},methods:{initCanvas(){var t=this;console.log("初始化canvas"),this.canvas=document.getElementById("scaleDragCanvas"),this.context=this.canvas.getContext("2d"),this.canvas1=document.getElementById("carCanvas"),this.ctx=this.canvas1.getContext("2d"),t.oDiv=document.getElementById("div1"),null!=t.flowData?(console.log(t.flowData),t.oDiv.style.width=t.flowData.canvasWidth+"px",t.oDiv.style.height=t.flowData.canvasHeight+"px",t.canvas1.width=t.flowData.canvasWidth,t.canvas1.height=t.flowData.canvasHeight,Object(_views_RCSNew_rcs_js__WEBPACK_IMPORTED_MODULE_1__["drawAgvMap1"])(this.context,this.canvas,this.flowData),this.addIcon(),Object(_views_RCSNew_rcs_js__WEBPACK_IMPORTED_MODULE_1__["removeWatermark"])(),Object(_views_RCSNew_rcs_js__WEBPACK_IMPORTED_MODULE_1__["watermark"])("第"+this.selectTabIndex+"层",document.getElementById("div1"))):(console.log("楼层信息未获取。。。"),setTimeout(()=>{t.initCanvas()},5e3))},scaleDom:function(t){let e=document.getElementById("div1"),a=parseFloat((e.style.transform||"scale(1)").replace(/[^0-9.]/gi,"")),s=t.wheelDelta/1200;a+=s,a>=.5&&(e.style.transform=`scale(${a})`)},handleDragDown(t){var e=this;t=t||window.event,e.mousex=t.clientX-e.oDiv.offsetLeft,e.mousey=t.clientY-e.oDiv.offsetTop,document.onmousemove=function(t){t=t||window.event,t.preventDefault?t.preventDefault():t.returnValue=!1;var a=t.clientX-e.mousex,s=t.clientY-e.mousey;e.oDiv.style.left=a+"px",e.oDiv.style.top=s+"px"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}},addIcon(){var t=this;t.imgList=[],t.flowData.mapinfo.forEach((function(e){"CustomEllipse"===e.dtype&&t.imgList.push(e)})),console.log(t.imgList)},transform(t){var e=this;this.transformId=setInterval((function(){var a=document.getElementById(t);e.rotateVal+=1,a.style.transform="rotate("+e.rotateVal+"deg)",a.style.transition="0.1s linear"}),100)},transformOut(){clearInterval(this.transformId)},initCar(){var _this=this;for(let i=0;i<4;i++)eval("_this.car"+(i+1)).x=_this.flowData[0].data[i].x,eval("_this.car"+(i+1)).y=_this.flowData[0].data[i].y},drawCar(){var _this=this;for(let i=0;i<4;i++)_this.ctx.fillStyle=eval("_this.car"+(i+1)).color,Object(_views_RCSNew_rcs_js__WEBPACK_IMPORTED_MODULE_1__["arcImg"])(_this.ctx,eval("_this.car"+(i+1)).x,eval("_this.car"+(i+1)).y)},webSocket(){var t=this;"WebSocket"in window?(console.log("您的浏览器支持WebSocket"),t.ws=new WebSocket("ws://"+window.location.hostname+":18080/websocket"),t.ws.onopen=function(){console.log("open"),t.ws.send(JSON.stringify(t.agv_register)),setInterval((function(){t.ws.send('{"Params": {},"ID": "1","Action": "ping"}')}),1e4)},t.ws.onmessage=function(e){var a=JSON.parse(e.data);switch(a.Action){case"agv_register":0==a.errCode?t.ws.send(JSON.stringify(t.agv_map)):console.log(a.errText);break;case"agv_map":0==a.errCode?(t.flowData=a.params.Result,t.TotalFloor=a.params.Result.TotalFloor,t.mapInfo="地图大小("+a.params.Result.gridRows+","+a.params.Result.gridColumns+")",t.initCanvas(),t.ws.send(JSON.stringify(t.agv_allcars))):console.log("获取楼层信息失败",a.errText);break;case"agv_allcars":0==a.errCode?(t.carList=a.params.Result,t.carShow=t.carList):console.log("获取所有agv信息失败",a.errText);break;case"agv_move":if(0==a.errCode){if(null!=t.carList){var s=a.params.Result.startPoint.split(","),r=a.params.Result.endPoint.split(",");t.carList.forEach(e=>{e.code==a.params.Result.code&&(void 0==e.path||null==e.path||e.path==[]?(e.power=a.params.Result.power,e.floor=a.params.Result.floor,e.left=Number(s[0]),e.top=Number(s[1]),e.endleft=Number(r[0]),e.endtop=Number(r[1]),e.path=new Array,e.distance=new Array,e.times=new Array,e.linePath=new Array,e.linePath=a.params.Result.linePath,e.times.push(a.params.Result.distance),e.path.push(a.params.Result.command),s[0]==r[0]?e.distance.push(Math.abs(Number(r[1])-Number(s[1]))):e.distance.push(Math.abs(Number(r[0])-Number(s[0]))),e.i=0,t.$options.methods.move(e,t)):(e.endleft=Number(r[0]),e.endtop=Number(r[1]),e.power=a.params.Result.power,e.floor=a.params.Result.floor,e.times.push(a.params.Result.distance),e.path.push(a.params.Result.command),s[0]==r[0]?e.distance.push(Math.abs(Number(r[1])-Number(s[1]))):e.distance.push(Math.abs(Number(r[0])-Number(s[0])))))})}}else console.log("获取agv实时位置失败",a.errText);break}},t.ws.onclose=function(){console.log("close")},t.ws.onerror=function(t){console.log(t)}):console.log("您的浏览器不支持WebSocket")},move(t,e){if(t.i==t.path.length)console.log("agv:"+t.code+"移动结束"),t.i=0,t.path=null,t.distance=null,t.times=null;else{var a=t.path[t.i],s=t.distance[t.i],r=t.times[t.i];switch(a){case 3:e.$options.methods.up(t,e,s,r);break;case 4:e.$options.methods.down(t,e,s,r);break;case 1:e.$options.methods.left(t,e,s,r);break;case 2:e.$options.methods.right(t,e,s,r);break}t.i++}},up(t,e,a,s){var r=0,o=a/(10*s),l=setInterval(()=>{r+=o,r<=a?e.$options.methods.run("up",t,e,o):(clearInterval(l),e.$options.methods.move(t,e))},100)},down(t,e,a,s){var r=0,o=a/(10*s),l=setInterval(()=>{r+=o,r<=a?e.$options.methods.run("down",t,e,o):(clearInterval(l),e.$options.methods.move(t,e))},100)},left(t,e,a,s){var r=0,o=a/(10*s),l=setInterval(()=>{r+=o,r<=a?e.$options.methods.run("left",t,e,o):(clearInterval(l),e.$options.methods.move(t,e))},100)},right(t,e,a,s){var r=0,o=a/(10*s),l=setInterval(()=>{r+=o,r<=a?e.$options.methods.run("right",t,e,o):(clearInterval(l),e.$options.methods.move(t,e))},100)},run(t,e,a,s){switch(t){case"up":e.top+=-s;break;case"down":e.top+=s;break;case"left":e.left+=-s;break;case"right":e.left+=s;break}},drawMovePath(t){t.ctx.clearRect(0,0,t.canvas1.width,t.canvas1.height),t.carList.forEach(e=>{if(e.floor==t.selectTabIndex&&null!=e.linePath){t.ctx.strokeStyle="#FF0000",t.ctx.lineWidth=1,t.ctx.beginPath(),t.ctx.moveTo(e.linePath[0].Left+5,e.linePath[0].Top+5);for(var a=1;a<e.linePath.length;a++)t.ctx.lineTo(e.linePath[a].Left+5,e.linePath[a].Top+5);t.ctx.stroke()}})},tabChange(t){var e=this;console.log(t),e.selectTabIndex=t,e.agv_map.Params.Floor=e.selectTabIndex,e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.flowData=null,e.ws.send(JSON.stringify(e.agv_map))},menuChange(t){var e=this;e.selectMenuIndex=t.index,1==e[""+("menu"+t.index)]?e[""+("menu"+t.index)]=!1:e.menuList.forEach(a=>{a.index==t.index?e[""+("menu"+t.index)]=!0:e[""+("menu"+a.index)]=!1})},handleClick(t,e){console.log(t,e)},IconOver(t){this.mapInfo+="  位置 X:"+t.l+",Y:"+t.t},IconOut(){this.mapInfo="地图大小("+this.flowData.gridRows+","+this.flowData.gridColumns+")"},carSearch(){var t=this;t.carShow=[],t.carList.forEach(e=>{e.code!=t.value&&""!=t.value||t.carShow.push(e)})}}}},9911:function(t,e,a){"use strict";a("c482")},c013:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAErklEQVR4Xu2aWcxdYxSGn1ckwoUK7iQiKiSmEENJCb0TvyCGlmq1CSGCxExC6a8khGhoLwwXhtJGVYzFhURFG2MTOly0UUHcGWJIJBLxymq+c7Kd/uffw5mdve7O2etb71rvXusb1rfFmIvGPH5qAuoMGHMG6hKomgC2bwSuAGZVtdGlcd8CKyQ9VsVepQywvQK4oQpgD8eslBQvpZSUJsD2IuC5Uij9U14s6fkycFUIeBuYSCCfAu+VAeyB7jmZMlwv6bwyGKUIsH0y8HkGYIGkl8oAdlvXdsxDL2bsniLpi6I4ZQl4CLgzGbekvYoC9VLP9j/Q3NQ9LOmuonhlCfgamJmMr5J0ZVGgXurZfgFYmDB2STqiKF5hAmwvAFZVTbWiDlXRm6I0F0rKlkVbs2UIeB24IFnaLunYKs72aoztbcAxyf4bki4sglWIANuHA7syBpdIeqAIQL90bN8DLMvgzZT0TR5+UQIi2LuTsb+BgyT9nme8n89t7w/8DOydcB+UFKRMK0UJ2AEcmSytk3RpnuFBPLf9CnBJwt4p6ag8P3IJsH0usD5jaJ6ktXmGB/Hc9lzg5Qz2hKR3pvOlCAHrgIuTka2Sjh9EcEUxbW8Bjkv6r0pqZMSUJqYlwPYM4NfMyGWS7i3qzCD0bN8PLMlgHyDpt3a+5BFwM9A4Zv4FnCbpy0EEVhTT9gnAJ8A+acwtkpZXJWAr0Fjv10qaV9SRQerZjnkg5oOQbZIaJbGHW20zwPapQJz2GjJf0ppBBlYU2/blwOqM/ixJn001fjoClgL3pUGR9rMl/VnUiUHq2d4P2AREOYRMSop4imWA7WuApzLak8CGQQZVAfvszAuM4ddKerrVzn8ywHZscGLiO70C4CgM+RhYLik2TLulSYDtbMqPQjCd+Ngsid0EjFnwDeKWSprUFFvdqPU4RGyR9EcnNA/TWNuzUyf7soxfE0HAR8AZ6c+hO+d3m0TbzwBXJ7sbg4DvgEPTH9dJerLboMNkz3acZb5KPn0fBDjj4BxJo7bcleY3G3NNQJ0BFUvA9onArcD7kgZ6VZaW8X2BuBP4Ja8mOi4B2yuB6zNAmyXFrVFfxfbRwPYW0EWS4p6grXSDgB+AQ1oQ+n5abLOBe03SRT0jwHYcMj6YAmCDpDn9TIGW+asJLSmv0dNc+SqtArZjHW3tDfZ9CbX9BND6TcBqSXFh2tMSiD7BHUCcu0PWSJrfz7ffwLIdN8Enpd9xd3mTpGwXew+3Op4DMuBXAW9K+nEQwWf8iON7ND/fLeJH1wgoAjaMOjUBmb1PpUlwGN9qGZ/qDGjJgJjADk4Mzs32y8qwOiq6LQ3fn6IENkbLOwUQ++i4W/s/S+xfDkwBbgoCohsUXaFxlDMbTdHbgEfGjIHbJT2abYvHbio+KGh8CNHg4ywg9v8hcUEyCtK40Yru1octDu8EdkjaHP8X+T4gDj5NAtpdMQ0LKy2HtdwDWk1A3puzXWdAXQJjPgc8CyxOpdL3tldeibY+tx2rWeNr8bcknT+djSKT4GGJgBmS4up86MV2NGuiSfu4pPhQoq3kEjD00XboYE1AhwSO/PA6A0b+FXYYwNhnwL+sEBDu8kf3CgAAAABJRU5ErkJggg=="},c482:function(t,e,a){}});
//# sourceMappingURL=app.ad820023.js.map